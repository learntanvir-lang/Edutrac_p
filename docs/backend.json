{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User Profile",
      "type": "object",
      "description": "Represents a user's profile information.",
      "properties": {
        "uid": { "type": "string", "description": "The user's unique ID." },
        "email": { "type": "string", "format": "email", "description": "The user's email address." },
        "displayName": { "type": "string", "description": "The user's display name." }
      },
      "required": ["uid", "email"]
    },
    "Subject": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Subject",
      "type": "object",
      "description": "Represents a subject, such as Physics or Chemistry.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "code": { "type": "string" },
        "papers": {
          "type": "array",
          "items": { "$ref": "#/entities/Paper" }
        }
      },
      "required": ["id", "name", "papers"]
    },
    "Paper": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Paper",
      "type": "object",
      "description": "Represents a paper within a subject (e.g., 1st Paper, 2nd Paper).",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "chapters": {
          "type": "array",
          "items": { "$ref": "#/entities/Chapter" }
        }
      },
      "required": ["id", "name", "chapters"]
    },
    "Chapter": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Chapter",
      "type": "object",
      "description": "Represents a chapter within a paper.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "number": { "type": "string" },
        "isCompleted": { "type": "boolean" },
        "progressItems": {
          "type": "array",
          "items": { "$ref": "#/entities/ProgressItem" }
        },
        "resourceLinks": {
          "type": "array",
          "items": { "$ref": "#/entities/ResourceLink" }
        }
      },
      "required": ["id", "name", "isCompleted", "progressItems", "resourceLinks"]
    },
    "ProgressItem": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Progress Item",
        "type": "object",
        "properties": {
            "id": { "type": "string" },
            "name": { "type": "string" },
            "completed": { "type": "number" },
            "total": { "type": "number" }
        },
        "required": ["id", "name", "completed", "total"]
    },
    "ResourceLink": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Resource Link",
        "type": "object",
        "properties": {
            "id": { "type": "string" },
            "url": { "type": "string", "format": "uri" },
            "description": { "type": "string" }
        },
        "required": ["id", "url", "description"]
    },
    "Exam": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Exam",
      "type": "object",
      "description": "Represents an exam with its details and scheduling information.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "subjectIds": { "type": "array", "items": { "type": "string" } },
        "chapterIds": { "type": "array", "items": { "type": "string" } },
        "date": { "type": "string", "format": "date-time" },
        "isCompleted": { "type": "boolean" }
      },
      "required": ["id", "name", "subjectIds", "chapterIds", "date", "isCompleted"]
    }
  },
  "auth": {
    "providers": ["password"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/UserProfile" },
      "description": "Stores user profile information."
    },
    "/users/{userId}/subjects/{subjectId}": {
      "schema": { "$ref": "#/entities/Subject" },
      "description": "Stores the subjects for a specific user. Papers and chapters are nested within."
    },
    "/users/{userId}/exams/{examId}": {
      "schema": { "$ref": "#/entities/Exam" },
      "description": "Stores the exams scheduled for a specific user."
    }
  }
}
